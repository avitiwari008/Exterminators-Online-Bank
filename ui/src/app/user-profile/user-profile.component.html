<!-- Nav Bar -->
<app-main-nav></app-main-nav>

<!-- User Profile -->
<div class="center-content">
    <mat-accordion class="main">
        <!-- Expansion panel for personal info -->
        <mat-expansion-panel class="expansion-panel">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Personal data
                </mat-panel-title>
            </mat-expansion-panel-header>
            <form [formGroup]="personalFormGroup">
                <!-- FirstName Field -- read Only -->
                <mat-form-field class="form-field">
                    <mat-label>First name </mat-label>
                    <input matInput readonly formControlName="firstNameCtrl" title="Readonly">
                </mat-form-field>

                <br>

                <!-- Last Name Field -- read Only -->
                <mat-form-field class="form-field">
                    <mat-label>Last name</mat-label>
                    <input matInput readonly formControlName="lastNameCtrl" title="Readonly">
                </mat-form-field>

                <br>

                <!-- Phone Number Field -- Could be updated -->
                <mat-form-field class="form-field">
                    <mat-label>Phone Number</mat-label>
                    <input matInput formControlName="phoneNumCtrl" required maxlength="10" minlength="10"
                        title="Editable">
                    <!--Error if phone number is not provided-->
                    <mat-error *ngIf="personalFormGroup.get('phoneNumCtrl').hasError('required')">
                        Phone Number is required
                    </mat-error >
                    <!--Error if phone number length is less than 10 digits-->
                    <mat-error *ngIf="personalFormGroup.get('phoneNumCtrl').hasError('minlength')">
                        Phone Number should have 10 digits
                    </mat-error>
                    <!--Error if phone number has characters other than digits-->
                    <mat-error *ngIf="personalFormGroup.get('phoneNumCtrl').hasError('pattern')">
                        Phone number should have numbers only
                    </mat-error>
                </mat-form-field>

                <br>

                <!-- Email id Field -- read Only -->
                <mat-form-field class="form-field">
                    <mat-label>Email</mat-label>
                    <input matInput readonly formControlName="emailIDCtrl" title="Readonly">
                </mat-form-field>

                <br>

                <!-- Date of Birth Field -- read Only -->
                <mat-form-field class="form-field">
                    <mat-label>Date of Birth</mat-label>
                    <!--Input for date with current and future dates disabled-->
                    <input matInput placeholder="Date of Birth" [min]="minDate" [max]="maxDate"
                        [matDatepicker]="myDatepicker" formControlName="dobCtrl" title="Editable">
                    <!--date picker for choosing dates-->
                    <mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
                    <mat-datepicker #myDatepicker></mat-datepicker>
                    <!--Error if dob is not provided-->
                    <mat-error *ngIf="personalFormGroup.get('dobCtrl').hasError('required')">
                        Date of Birth is required
                    </mat-error>
                    <!--Error if dob is today's date-->
                    <mat-error *ngIf="personalFormGroup.get('dobCtrl').hasError('min')">
                        Date of Birth cannot be current date
                    </mat-error>
                    <!--Error if dob is future date-->
                    <mat-error *ngIf="personalFormGroup.get('dobCtrl').hasError('max')">
                        Date of Birth cannot be future date
                    </mat-error>
                </mat-form-field>
            </form>
        </mat-expansion-panel>

        <!-- Expansion panel for address info -->
        <mat-expansion-panel class="expansion-panel">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Address Details
                </mat-panel-title>
            </mat-expansion-panel-header>

            <br>
            <!-- Address Line 1 Field -- could be updated -->
            <form [formGroup]="addressFormGroup">
                <mat-form-field class="form-field">
                    <mat-label>Address Line 1</mat-label>
                    <input matInput formControlName="addressLine1Ctrl" required title="Editable">
                    <!--Error if value is not provided-->
                    <mat-error *ngIf="addressFormGroup.get('addressLine1Ctrl').hasError('required')">
                        Address is required
                    </mat-error>
                </mat-form-field>

                <br>

                <!-- Address Line 1 Field -- could be updated -->
                <mat-form-field class="form-field">
                    <mat-label>Address Line 2</mat-label>
                    <input matInput formControlName="addressLine2Ctrl" required title="Editable">
                    <!--Error if value is not provided-->
                    <mat-error *ngIf="addressFormGroup.get('addressLine2Ctrl').hasError('required')">
                        Address is required
                    </mat-error>
                </mat-form-field>

                <br>

                <!-- City Field -- could be updated -->
                <mat-form-field class="form-field">
                    <mat-label>City</mat-label>
                    <input matInput formControlName="cityCtrl" required title="Editable">
                    <!--Error if value is not provided-->
                    <mat-error *ngIf="addressFormGroup.get('cityCtrl').hasError('required')">
                        City is required
                    </mat-error>
                    <!--Error if value is not provided-->
                    <mat-error *ngIf="addressFormGroup.get('cityCtrl').hasError('pattern')">
                        Invalid city
                    </mat-error>
                </mat-form-field>

                <br>

                <!-- State Field -- could be updated -->
                <mat-form-field class="form-field">
                    <mat-label>State</mat-label>
                    <input matInput formControlName="stateCtrl" required title="Editable">
                    <!--Error if value is not provided-->
                    <mat-error *ngIf="addressFormGroup.get('stateCtrl').hasError('required')">
                        State is required
                    </mat-error>
                    <!--Error if state has invalid characters-->
                    <mat-error *ngIf="addressFormGroup.get('stateCtrl').hasError('pattern')">
                        Invalid State
                    </mat-error>
                </mat-form-field>

                <br>

                <!-- ZipCode Field -- could be updated -->
                <mat-form-field class="form-field">
                    <mat-label>ZipCode</mat-label>
                    <input matInput formControlName="zipCtrl" required title="Editable">
                    <!-- Error if zipcode is not provided -->
                    <mat-error *ngIf="addressFormGroup.get('zipCtrl').hasError('required')">
                        Zip Code is required
                    </mat-error>
                    <!-- Error if zipcode has characters other than digits -->
                    <mat-error *ngIf="addressFormGroup.get('zipCtrl').hasError('pattern')">
                        Zip Code should be numeric
                    </mat-error>
                    <!-- Error if max length is more than 5 digits -->
                    <mat-error *ngIf="addressFormGroup.get('zipCtrl').hasError('minlength')">
                        Zip Code can have maximum 5 digits
                    </mat-error>
                    <!-- Error if min length is less than 5 digits -->
                    <mat-error *ngIf="addressFormGroup.get('zipCtrl').hasError('maxlength')">
                        Zip Code can have maximum 5 digits
                    </mat-error>
                </mat-form-field>
            </form>
        </mat-expansion-panel>

        <!-- Expansion panel for credential info -->
        <mat-expansion-panel class="expansion-panel">
            <!-- Header -->
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Credential Details
                </mat-panel-title>
            </mat-expansion-panel-header>

            <!-- Password Field -- could be updated -->
            <form [formGroup]="credentialsFormGroup">
                <mat-form-field class="form-field">
                    <mat-label>Password</mat-label>
                    <input matInput [type]="hide ? 'password' : 'text'" formControlName="password" 
                    required title="Editable">
                    <!--Icon to show password if hidden-->
                    <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                    <!--Error if password is not provided-->
                    <mat-error *ngIf="credentialsFormGroup.get('password').hasError('required')">
                        Password is require
                    </mat-error>
                    <!--Error if password does not follow given pattern-->
                    <mat-error *ngIf="credentialsFormGroup.get('password').hasError('pattern')">
                        Password should have atleast 1 uppercase, 1 lowercase, 1 digit and
                        1 special character and minimum length of 9 characters
                    </mat-error>
                </mat-form-field>
            </form>
        </mat-expansion-panel>

        <!-- Expansion panel for Account info -->
        <mat-expansion-panel class="expansion-panel">
            <!-- header -->
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Account Details
                </mat-panel-title>
            </mat-expansion-panel-header>

            <br>
            <form [formGroup]="ssnFormGroup">
                <!-- Account Number -- readonly -->
                <mat-form-field class="form-field">
                    <mat-label>Account Number</mat-label>
                    <input matInput readonly formControlName="accNumCtrl" title="Readonly">
                </mat-form-field>

                <br>

                <mat-form-field class="form-field">
                    <!-- Routing Number -- readonly -->
                    <mat-label>Routing Number</mat-label>
                    <input matInput formControlName="routingNumCtrl" readonly title="Readonly">
                </mat-form-field>

                <br>

                <mat-form-field class="form-field">
                    <!-- Social Security Number -- readonly -->
                    <mat-label>Social Security Number</mat-label>
                    <input matInput readonly formControlName="ssn" [type]="hideSSN ? 'password' : 'text'" title="Readonly">
                    <!--icon to show values if hidden-->
                    <mat-icon matSuffix (click)="hideSSN = !hideSSN">{{hideSSN ? 'visibility_off' : 'visibility'}}
                    </mat-icon>
                </mat-form-field>
            </form>
        </mat-expansion-panel>

        <div>
            <!-- Submit Button -->
            <button mat-raised-button color="primary" [disabled]="!(personalFormGroup.valid && addressFormGroup.valid && 
            credentialsFormGroup.valid && ssnFormGroup.valid)" (click)="updateUser()">Submit</button>
        </div>
    </mat-accordion>
</div>


<app-footer></app-footer>